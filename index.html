<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TuttioMods</title>
  <link rel="stylesheet" href="styles.css">
  <meta name="description" content="Links to socials, coupons, and info about my tuttio.">
</head>
<body>
  <main class="page">
    <header class="profile">
      <!-- Replace image src with your avatar path or remove the <img> -->
      <img class="avatar" src="https://via.placeholder.com/160" alt="avatar">
      <h1 class="name">Your Name / Tuttio</h1>
      <p class="bio">Short line about your tuttio. Links below for socials, merch and coupons.</p>
    </header>

    <section class="links">
      <!-- Edit labels and hrefs -->
      <a class="link" href="https://twitter.com/" target="_blank" rel="noopener">Twitter</a>
      <a class="link" href="https://instagram.com/" target="_blank" rel="noopener">Instagram</a>
      <a class="link" href="https://youtube.com/" target="_blank" rel="noopener">YouTube</a>
      <a class="link" href="https://tiktok.com/" target="_blank" rel="noopener">TikTok</a>
      <a class="link" href="mailto:you@example.com">Email</a>
      <a class="link" href="https://yourstore.example/" target="_blank" rel="noopener">Merch / Store</a>
      <a class="link secondary" href="#coupons">Coupons & Offers</a>
    </section>

    <section id="coupons" class="coupons">
      <h2>Coupons & Offers</h2>
      <div class="coupon-list">
        <div class="coupon">
          <strong>10% OFF</strong>
          <span>USE: TUTTIO10 — Valid on first order</span>
        </div>
        <div class="coupon">
          <strong>Free Shipping</strong>
          <span>USE: SHIPFREE — Orders $25+</span>
        </div>
      </div>
    </section>

    <footer class="footer">
      <small>Made for your tuttio · Hosted on GitHub Pages</small>
    </footer>
  </main>

  <!-- Coupon popup -->
  <div id="couponPopup" class="popup hidden" aria-hidden="true" role="dialog" aria-label="Coupon">
    <div class="popup-inner">
      <button id="closePopup" class="close" aria-label="Close popup">×</button>
      <h3>Special Offer</h3>
      <p>Scroll bonus: take 15% off with code <strong>TUTTIO15</strong></p>
      <div class="popup-actions">
        <button id="useCode" class="cta">Copy Code</button>
        <button id="dismissOnce" class="muted">Don't show again</button>
      </div>
    </div>
  </div>

  <script>
    // Popup behavior: show when user scrolls down a bit.
    (function () {
      const popup = document.getElementById('couponPopup');
      const closeBtn = document.getElementById('closePopup');
      const dismissOnce = document.getElementById('dismissOnce');
      const useCode = document.getElementById('useCode');
      const SCROLL_THRESHOLD = 250; // px

      // If user already dismissed, do nothing.
      if (localStorage.getItem('tuttio_coupon_seen') === 'true') {
        return;
      }

      let shown = false;
      function showPopup() {
        if (shown) return;
        popup.classList.remove('hidden');
        popup.setAttribute('aria-hidden', 'false');
        shown = true;
      }

      function hidePopup() {
        popup.classList.add('hidden');
        popup.setAttribute('aria-hidden', 'true');
      }

      window.addEventListener('scroll', function onScroll() {
        if (window.scrollY > SCROLL_THRESHOLD) {
          showPopup();
          // Remove listener after showing once
          window.removeEventListener('scroll', onScroll);
        }
      });

      closeBtn.addEventListener('click', hidePopup);
      useCode.addEventListener('click', function () {
        // Copy to clipboard
        navigator.clipboard?.writeText('TUTTIO15').then(() => {
          useCode.textContent = 'Copied';
          hidePopup();
          localStorage.setItem('tuttio_coupon_seen', 'true');
        }, () => {
          // fallback
          alert('Code: TUTTIO15');
          hidePopup();
          localStorage.setItem('tuttio_coupon_seen', 'true');
        });
      });

      dismissOnce.addEventListener('click', function () {
        hidePopup();
        localStorage.setItem('tuttio_coupon_seen', 'true');
      });

      // Accessibility: close on ESC
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') hidePopup();
      });
    })();
  </script>
</body>
</html>
